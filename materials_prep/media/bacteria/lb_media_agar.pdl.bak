<?xml version="1.0"?>
<protocol name="LB agar">

  <information>Prepare LB agar media for pouring plates.</information>

  <!-- Arguments -->
    <!-- None! -->
  <!-- Initial takes -->
  <take>
    <!-- FIXME: bottle doesn't actually have to be sterile, just clean. How many 'states' should an object have? -->
    <object>1L bottle (sterile)</object>
    <quantity>1</quantity>
    <var>bottle</var>
  </take>
  <take>
    <!-- Do we use a stir bar for other media? Seems like a pretty awesome thing to use -->
    <object>Medium Magnetic Stir Bar</object>
    <quantity>1</quantity>
    <var>bar</var>
  </take>
  <take>
    <object>LB Agar Powder</object>
    <quantity>1</quantity>
    <var>lb_agar_powder</var>
  </take>

  <!-- Begin steps -->
  <!-- Add stir bar to bottle -->
  <step>
    <description>Put the stir bar in the bottle.</description>
    <note>Be sure that the bottle has no autoclave tape on it.</note>
  </step>
  <!-- TODO: take the scale -->
  <!-- TODO: take a weigh boat -->
  <!-- TODO: take a spatula? -->
  <!-- Weigh out LB agar powder and add to the bottle -->
  <!-- TODO: This is boilerplate. Should remove redundant code like this into an include -->
  <step>
    <description>Weigh out 29.6g of LB Agar Powder and pour into the bottle.</description>
    <note>Use the weigh boat and spatula. If you overshoot the weight, discard excess into a waste bin using the spatula.</note>
  </step>
  <!-- TODO: Discard the weigh boat -->
  <!-- Add water and hsake -->
  <step>
    <description>Fill bottle with DI water and shake</description>
    <note>Fill to the 800mL line with deionized water. Shake until all powder is dissolved.</note>
  </step>
  <!-- Autoclave -->
  <!-- TODO: this should also be an include -->
  <!-- TODO: should acquire the autoclave -->
  <step>
    <!-- Show picture here -->
    <description>Attach autoclave tape to the bottle and cap and autoclave.</description>
    <note>Autoclave at 110C for 15 minutes.</note>
    <warning>Make sure the cap is loose. The bottle may explode if it's too tight.</warning>
  </step>

  <!-- Produces -->
  <produce>
    <object>800mL LB Agar (sterile)</object>
    <quantity>1</quantity>
  </produce>

  <!-- Releases -->
  <release>%{tape}[0], %{lb_agar_powder}</release>

</protocol>
